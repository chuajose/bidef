<div class="row">
    <div class="col-lg-12">
        <div class="wrapper wrapper-content">
            <div class="row animated fadeInDown">
                <div class="col-lg-2">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Citas por agendar</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="close-link">
                                    <i class="fa fa-times"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">
                            <div id='external-events'>
                                <p>Arrastra un evento al calendario para fechar</p>
                                <div class='external-event blue-bg'>Llamar al ayuntamiento de Lugo.</div>
                                <div class='external-event black-bg'>Enviar documentación a Empresa Demo SA</div>
                                <div class='external-event navy-bg'>Reunión con Ángel Cámara</div>
                                <div class='external-event yellow-bg'>Otra actividad...</div>

                                <p class="m-t">
                                    <input type='checkbox' id='drop-remove' class="i-checks" checked /> <label for='drop-remove'>Eliminar después de fechar</label>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Agenda</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="close-link">
                                    <i class="fa fa-times"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">
                            <div id="calendarIndex"></div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Estáditicas generales</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="close-link">
                                    <i class="fa fa-times"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">
                            <div>
                                <div class="grafica"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Estáditicas generales</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="close-link">
                                    <i class="fa fa-times"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">
                            <div>
                                <div class="grafica"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Resultados por zonas</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="close-link">
                                    <i class="fa fa-times"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Actividad de empleados</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="close-link">
                                    <i class="fa fa-times"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">
                            <div class="clearfix">
                                <div class="pull-right input-daterange input-group" id="datepicker">
                                    <span class="input-group-addon">Desde</span>
                                    <input type="text" class="input-sm form-control" name="start" value="05/14/2014"/>
                                    <span class="input-group-addon">Hasta</span>
                                    <input type="text" class="input-sm form-control" name="end" value="05/22/2014" />
                                </div>
                            </div>
                            <div class="clearfix mTop15">
                                <select multiple chosen class="chosen-select col-md-6">
                                    <option>Todos</option>
                                    <option>Ana Nuñez</option>
                                    <option>Carlos Cano</option>
                                    <option>Pablo Fernádez</option>
                                    <option>...</option>
                                </select>
                                <a href="javascript:void(0);" class="pull-right btn btn-sm btn-primary">ok</a>
                            </div>
                            <div class="actividad"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">

    $(document).ready(function(){
        $('.bar_dashboard').sparkline('html', {type: 'bar', barColor: '#1ab394'});

        var data_heatmap = [[0,0,0],[1,0,1],[2,0,6],[3,0,7],[4,0,4],[5,0,null],[6,0,null],[7,0,3],[8,0,2],[9,0,3],[10,0,1],[11,0,9],[12,0,null],[13,0,null],[14,0,7],[15,0,0],[16,0,8],[17,0,8],[18,0,6],[19,0,null],[20,0,null],[21,0,4],[22,0,7],[23,0,8],[24,0,8],[25,0,9],[26,0,null],[27,0,null],[28,0,3],[29,0,8],[0,1,7],[1,1,5],[2,1,9],[3,1,1],[4,1,0],[5,1,null],[6,1,null],[7,1,0],[8,1,4],[9,1,8],[10,1,7],[11,1,5],[12,1,null],[13,1,null],[14,1,9],[15,1,3],[16,1,1],[17,1,3],[18,1,6],[19,1,null],[20,1,null],[21,1,4],[22,1,6],[23,1,8],[24,1,2],[25,1,3],[26,1,null],[27,1,null],[28,1,8],[29,1,0],[0,2,1],[1,2,4],[2,2,5],[3,2,8],[4,2,1],[5,2,null],[6,2,null],[7,2,2],[8,2,7],[9,2,5],[10,2,10],[11,2,3],[12,2,null],[13,2,null],[14,2,0],[15,2,9],[16,2,5],[17,2,0],[18,2,9],[19,2,null],[20,2,null],[21,2,9],[22,2,8],[23,2,6],[24,2,3],[25,2,7],[26,2,null],[27,2,null],[28,2,9],[29,2,5],[0,3,10],[1,3,5],[2,3,9],[3,3,6],[4,3,2],[5,3,null],[6,3,null],[7,3,1],[8,3,9],[9,3,0],[10,3,1],[11,3,0],[12,3,null],[13,3,null],[14,3,4],[15,3,6],[16,3,9],[17,3,6],[18,3,9],[19,3,null],[20,3,null],[21,3,5],[22,3,0],[23,3,8],[24,3,9],[25,3,0],[26,3,null],[27,3,null],[28,3,7],[29,3,3],[0,4,0],[1,4,6],[2,4,2],[3,4,9],[4,4,1],[5,4,null],[6,4,null],[7,4,6],[8,4,5],[9,4,0],[10,4,1],[11,4,5],[12,4,null],[13,4,null],[14,4,5],[15,4,0],[16,4,0],[17,4,8],[18,4,1],[19,4,null],[20,4,null],[21,4,10],[22,4,8],[23,4,3],[24,4,0],[25,4,1],[26,4,null],[27,4,null],[28,4,9],[29,4,9],[0,5,8],[1,5,7],[2,5,3],[3,5,8],[4,5,5],[5,5,null],[6,5,null],[7,5,2],[8,5,9],[9,5,2],[10,5,6],[11,5,10],[12,5,null],[13,5,null],[14,5,8],[15,5,8],[16,5,8],[17,5,10],[18,5,4],[19,5,null],[20,5,null],[21,5,3],[22,5,10],[23,5,5],[24,5,9],[25,5,4],[26,5,null],[27,5,null],[28,5,5],[29,5,10],[0,6,2],[1,6,7],[2,6,9],[3,6,10],[4,6,10],[5,6,null],[6,6,null],[7,6,10],[8,6,1],[9,6,9],[10,6,8],[11,6,9],[12,6,null],[13,6,null],[14,6,6],[15,6,1],[16,6,7],[17,6,0],[18,6,3],[19,6,null],[20,6,null],[21,6,6],[22,6,3],[23,6,10],[24,6,5],[25,6,0],[26,6,null],[27,6,null],[28,6,7],[29,6,3],[0,7,10],[1,7,1],[2,7,7],[3,7,9],[4,7,7],[5,7,null],[6,7,null],[7,7,5],[8,7,3],[9,7,2],[10,7,4],[11,7,6],[12,7,null],[13,7,null],[14,7,9],[15,7,3],[16,7,6],[17,7,8],[18,7,2],[19,7,null],[20,7,null],[21,7,7],[22,7,6],[23,7,10],[24,7,6],[25,7,1],[26,7,null],[27,7,null],[28,7,1],[29,7,3],[0,8,2],[1,8,4],[2,8,9],[3,8,5],[4,8,4],[5,8,null],[6,8,null],[7,8,4],[8,8,6],[9,8,0],[10,8,7],[11,8,6],[12,8,null],[13,8,null],[14,8,2],[15,8,3],[16,8,5],[17,8,9],[18,8,9],[19,8,null],[20,8,null],[21,8,8],[22,8,0],[23,8,2],[24,8,4],[25,8,10],[26,8,null],[27,8,null],[28,8,6],[29,8,10],[0,9,7],[1,9,9],[2,9,6],[3,9,3],[4,9,9],[5,9,null],[6,9,null],[7,9,2],[8,9,5],[9,9,10],[10,9,5],[11,9,8],[12,9,null],[13,9,null],[14,9,4],[15,9,4],[16,9,3],[17,9,8],[18,9,8],[19,9,null],[20,9,null],[21,9,9],[22,9,9],[23,9,4],[24,9,4],[25,9,0],[26,9,null],[27,9,null],[28,9,8],[29,9,9],[0,10,10],[1,10,6],[2,10,7],[3,10,0],[4,10,9],[5,10,null],[6,10,null],[7,10,1],[8,10,10],[9,10,4],[10,10,0],[11,10,7],[12,10,null],[13,10,null],[14,10,2],[15,10,7],[16,10,0],[17,10,1],[18,10,9],[19,10,null],[20,10,null],[21,10,5],[22,10,0],[23,10,4],[24,10,3],[25,10,4],[26,10,null],[27,10,null],[28,10,9],[29,10,6],[0,11,1],[1,11,6],[2,11,5],[3,11,10],[4,11,0],[5,11,null],[6,11,null],[7,11,10],[8,11,0],[9,11,9],[10,11,8],[11,11,0],[12,11,null],[13,11,null],[14,11,4],[15,11,5],[16,11,0],[17,11,3],[18,11,6],[19,11,null],[20,11,null],[21,11,0],[22,11,8],[23,11,7],[24,11,7],[25,11,0],[26,11,null],[27,11,null],[28,11,3],[29,11,8],[0,12,1],[1,12,2],[2,12,2],[3,12,1],[4,12,6],[5,12,null],[6,12,null],[7,12,5],[8,12,5],[9,12,5],[10,12,1],[11,12,7],[12,12,null],[13,12,null],[14,12,0],[15,12,6],[16,12,7],[17,12,1],[18,12,5],[19,12,null],[20,12,null],[21,12,8],[22,12,10],[23,12,3],[24,12,8],[25,12,4],[26,12,null],[27,12,null],[28,12,9],[29,12,9]];

        $('.actividad').highcharts({
        chart: {
            type: 'heatmap',
            marginTop: 40,
            marginBottom: 40
        },


        title: {
            text: null
        },

        xAxis: {
            categories: ['1', '2', '3', '4', '5','6', '7', '8', '9', '10','11', '12', '13', '14', '15','16', '17', '18', '19', '20','21', '22', '23', '24', '25','26', '27', '28', '29', '30'],
            title: null
        },

        yAxis: {
            categories: ['Ana Nuñez', 'Carlos Cano', 'Pablo Fernádez', 'María Cuenca', 'Lucas Lorenze', 'María Barros', 'León Vasto', 'Andrea Esteban', 'Tino Mantos', 'Laura Pazos', 'Mariano Rajoy', 'Pablo Iglesias', 'Barack Obama']
        },

        colorAxis: {
            stops: [
                [0, '#c0392b'],
                [0.4, '#ffffff'],
                [1, '#16a085']
            ],
            min: 0,
        },

        legend: {
            align: 'right',
            layout: 'vertical',
            margin: 0,
            verticalAlign: 'top',
            y: 25,
            symbolHeight: 320
        },

        tooltip: {
            formatter: function () {
                return '<b>' + this.series.yAxis.categories[this.point.y] + '</b> realizó <b>' +
                    this.point.value + '</b> llamadas el día <b>' + this.series.xAxis.categories[this.point.x] + '</b>';
            }
        },

        series: [{
            name: null,
            borderColor: '#fff',
            borderWidth: 2,
            nullColor: '#eeeeee',
            data: data_heatmap,
            dataLabels: {
                enabled: false,
                color: 'black',
                style: {
                    textShadow: 'none',
                    HcTextStroke: null
                }
            }
        }]

    });

        /* initialize the external events
             -----------------------------------------------------------------*/

            $('#external-events div.external-event').each(function() {

                // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
                // it doesn't need to have a start or end
                var eventObject = {
                    title: $.trim($(this).text()) // use the element's text as the event title
                };

                // store the Event Object in the DOM element so we can get to it later
                $(this).data('eventObject', eventObject);

                // make the event draggable using jQuery UI
                $(this).draggable({
                    zIndex: 999,
                    revert: true,      // will cause the event to go back to its
                    revertDuration: 0  //  original position after the drag
                });

            });


            /* initialize the calendar
             -----------------------------------------------------------------*/
            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();

            $('#calendarIndex').fullCalendar({
                header: {
                    left: 'prev,next',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                buttonText: {
                    today:    'hoy',
                    month:    'mes',
                    week:     'semana',
                    day:      'día'
                },
                timeFormat: 'H:mm{ - H:mm}',
                dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles','Jueves', 'Sabado', 'Domingo'],
                dayNamesShort: ["Do", "Lu", "Mar", "Mi", "ju", "Vi", "Sa", "Do"],
                monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril','Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                monthNamesShort: ['En', 'Feb', 'Mar', 'Abr','May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                editable: true,
                droppable: true, // this allows things to be dropped onto the calendar !!!
                drop: function(date, allDay) { // this function is called when something is dropped

                    // retrieve the dropped element's stored Event Object
                    var originalEventObject = $(this).data('eventObject');

                    // we need to copy it, so that multiple events don't have a reference to the same object
                    var copiedEventObject = $.extend({}, originalEventObject);

                    // assign it the date that was reported
                    copiedEventObject.start = date;
                    copiedEventObject.allDay = allDay;

                    // render the event on the calendar
                    // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
                    $('#calendarIndex').fullCalendar('renderEvent', copiedEventObject, true);

                    // is the "remove after drop" checkbox checked?
                    if ($('#drop-remove').is(':checked')) {
                        // if so, remove the element from the "Draggable Events" list
                        $(this).remove();
                    }

                },
                events: [
                    {
                        className: 'blue-bg',
                        editable: true,
                        description: 'Reunión',
                        title: 'Evento para todo el día',
                        start: new Date(y, m, 1)
                    },
                    {
                        className: 'blue-bg',
                        editable: true,
                        description: 'Llamada',
                        title: 'Evento largo',
                        start: new Date(y, m, d-5),
                        end: new Date(y, m, d-2),
                    },
                    {
                        className: 'black-bg',
                        editable: true,
                        description: 'Llamada',
                        id: 999,
                        title: 'Evento repetitivo',
                        start: new Date(y, m, d-3, 16, 0),
                        allDay: false,
                    },
                    {
                        className: 'blue-bg',
                        editable: true,
                        description: 'Llamada',
                        id: 999,
                        title: 'Evento repetitivo',
                        start: new Date(y, m, d+4, 16, 0),
                        allDay: false
                    },
                    {
                        className: 'yellow-bg',
                        description: 'Mail',
                        editable: true,
                        title: 'Reunión',
                        start: new Date(y, m, d, 10, 30),
                        allDay: false
                    },
                    {
                        className: 'black-bg',
                        description: 'Mail',
                        editable: true,
                        title: 'Comida',
                        start: new Date(y, m, d, 12, 0),
                        end: new Date(y, m, d, 14, 0),
                        allDay: false
                    },
                    {
                        className: 'black-bg',
                        description: 'Otra actividad',
                        editable: true,
                        title: 'Verificación de candidatos',
                        start: new Date(y, m, d+1, 19, 0),
                        end: new Date(y, m, d+1, 22, 30),
                        allDay: false
                    }
                ],
                eventClick: function(event) {
                    //window.open(event.url, 'gcalevent', 'width=300,height=300');
                    $(this).attr('target', '_blank');
                    return true;
                },
                eventMouseover: function(event) {
                    // opens events in a popup window
                    //window.open(event.url, 'gcalevent', 'width=700,height=600');
                    //console.dir($(this));
                    $this = $(this);
                    $this.css({'opacity': 0.7});
                    contentEvent = '<p class="agendaFecha">';
                    //console.dir(event.end);
                    if(event.end) contentEvent += 'Del: '+$.fullCalendar.formatDate(event.start, 'MM-dd-yyyy, H:mm')+' hr<br>Hasta: '+$.fullCalendar.formatDate(event.end, 'MM-dd-yyyy, H:mm')+' hr';
                    else contentEvent += 'El: '+$.fullCalendar.formatDate(event.start, 'MM-dd-yyyy, H:mm');
                    contentEvent += '</p>';
                    contentEvent += '<p class="agendaDesc">'+event.description+'</p>';



                    $this.popover({html:true,title:event.title,placement:'top',content:contentEvent,container:'body'}).popover('show');
                    return false;
                },
                eventMouseout: function(event) {
                    $this = $(this);
                    $this.css( {'opacity': 1});
                    $this.popover('hide');
                },
            });
    });
</script>